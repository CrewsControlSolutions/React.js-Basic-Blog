{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar InsertOpsConverter_1 = require(\"./InsertOpsConverter\");\n\nvar OpToHtmlConverter_1 = require(\"./OpToHtmlConverter\");\n\nvar Grouper_1 = require(\"./grouper/Grouper\");\n\nvar group_types_1 = require(\"./grouper/group-types\");\n\nvar ListNester_1 = require(\"./grouper/ListNester\");\n\nvar funcs_html_1 = require(\"./funcs-html\");\n\nvar obj = require(\"./helpers/object\");\n\nvar value_types_1 = require(\"./value-types\");\n\nvar TableGrouper_1 = require(\"./grouper/TableGrouper\");\n\nvar BrTag = '<br/>';\n\nvar QuillDeltaToHtmlConverter = function () {\n  function QuillDeltaToHtmlConverter(deltaOps, options) {\n    this.rawDeltaOps = [];\n    this.callbacks = {};\n    this.options = obj.assign({\n      paragraphTag: 'p',\n      encodeHtml: true,\n      classPrefix: 'ql',\n      inlineStyles: false,\n      multiLineBlockquote: true,\n      multiLineHeader: true,\n      multiLineCodeblock: true,\n      multiLineParagraph: true,\n      allowBackgroundClasses: false,\n      linkTarget: '_blank'\n    }, options, {\n      orderedListTag: 'ol',\n      bulletListTag: 'ul',\n      listItemTag: 'li'\n    });\n    var inlineStyles;\n\n    if (!this.options.inlineStyles) {\n      inlineStyles = undefined;\n    } else if (typeof this.options.inlineStyles === 'object') {\n      inlineStyles = this.options.inlineStyles;\n    } else {\n      inlineStyles = {};\n    }\n\n    this.converterOptions = {\n      encodeHtml: this.options.encodeHtml,\n      classPrefix: this.options.classPrefix,\n      inlineStyles: inlineStyles,\n      listItemTag: this.options.listItemTag,\n      paragraphTag: this.options.paragraphTag,\n      linkRel: this.options.linkRel,\n      linkTarget: this.options.linkTarget,\n      allowBackgroundClasses: this.options.allowBackgroundClasses\n    };\n    this.rawDeltaOps = deltaOps;\n  }\n\n  QuillDeltaToHtmlConverter.prototype._getListTag = function (op) {\n    return op.isOrderedList() ? this.options.orderedListTag + '' : op.isBulletList() ? this.options.bulletListTag + '' : op.isCheckedList() ? this.options.bulletListTag + '' : op.isUncheckedList() ? this.options.bulletListTag + '' : '';\n  };\n\n  QuillDeltaToHtmlConverter.prototype.getGroupedOps = function () {\n    var deltaOps = InsertOpsConverter_1.InsertOpsConverter.convert(this.rawDeltaOps, this.options);\n    var pairedOps = Grouper_1.Grouper.pairOpsWithTheirBlock(deltaOps);\n    var groupedSameStyleBlocks = Grouper_1.Grouper.groupConsecutiveSameStyleBlocks(pairedOps, {\n      blockquotes: !!this.options.multiLineBlockquote,\n      header: !!this.options.multiLineHeader,\n      codeBlocks: !!this.options.multiLineCodeblock\n    });\n    var groupedOps = Grouper_1.Grouper.reduceConsecutiveSameStyleBlocksToOne(groupedSameStyleBlocks);\n    var tableGrouper = new TableGrouper_1.TableGrouper();\n    groupedOps = tableGrouper.group(groupedOps);\n    var listNester = new ListNester_1.ListNester();\n    return listNester.nest(groupedOps);\n  };\n\n  QuillDeltaToHtmlConverter.prototype.convert = function () {\n    var _this = this;\n\n    var groups = this.getGroupedOps();\n    return groups.map(function (group) {\n      if (group instanceof group_types_1.ListGroup) {\n        return _this._renderWithCallbacks(value_types_1.GroupType.List, group, function () {\n          return _this._renderList(group);\n        });\n      } else if (group instanceof group_types_1.TableGroup) {\n        return _this._renderWithCallbacks(value_types_1.GroupType.Table, group, function () {\n          return _this._renderTable(group);\n        });\n      } else if (group instanceof group_types_1.BlockGroup) {\n        var g = group;\n        return _this._renderWithCallbacks(value_types_1.GroupType.Block, group, function () {\n          return _this._renderBlock(g.op, g.ops);\n        });\n      } else if (group instanceof group_types_1.BlotBlock) {\n        return _this._renderCustom(group.op, null);\n      } else if (group instanceof group_types_1.VideoItem) {\n        return _this._renderWithCallbacks(value_types_1.GroupType.Video, group, function () {\n          var g = group;\n          var converter = new OpToHtmlConverter_1.OpToHtmlConverter(g.op, _this.converterOptions);\n          return converter.getHtml();\n        });\n      } else {\n        return _this._renderWithCallbacks(value_types_1.GroupType.InlineGroup, group, function () {\n          return _this._renderInlines(group.ops, true);\n        });\n      }\n    }).join('');\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderWithCallbacks = function (groupType, group, myRenderFn) {\n    var html = '';\n    var beforeCb = this.callbacks['beforeRender_cb'];\n    html = typeof beforeCb === 'function' ? beforeCb.apply(null, [groupType, group]) : '';\n\n    if (!html) {\n      html = myRenderFn();\n    }\n\n    var afterCb = this.callbacks['afterRender_cb'];\n    html = typeof afterCb === 'function' ? afterCb.apply(null, [groupType, html]) : html;\n    return html;\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderList = function (list) {\n    var _this = this;\n\n    var firstItem = list.items[0];\n    return funcs_html_1.makeStartTag(this._getListTag(firstItem.item.op)) + list.items.map(function (li) {\n      return _this._renderListItem(li);\n    }).join('') + funcs_html_1.makeEndTag(this._getListTag(firstItem.item.op));\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderListItem = function (li) {\n    li.item.op.attributes.indent = 0;\n    var converter = new OpToHtmlConverter_1.OpToHtmlConverter(li.item.op, this.converterOptions);\n    var parts = converter.getHtmlParts();\n\n    var liElementsHtml = this._renderInlines(li.item.ops, false);\n\n    return parts.openingTag + liElementsHtml + (li.innerList ? this._renderList(li.innerList) : '') + parts.closingTag;\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderTable = function (table) {\n    var _this = this;\n\n    return funcs_html_1.makeStartTag('table') + funcs_html_1.makeStartTag('tbody') + table.rows.map(function (row) {\n      return _this._renderTableRow(row);\n    }).join('') + funcs_html_1.makeEndTag('tbody') + funcs_html_1.makeEndTag('table');\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderTableRow = function (row) {\n    var _this = this;\n\n    return funcs_html_1.makeStartTag('tr') + row.cells.map(function (cell) {\n      return _this._renderTableCell(cell);\n    }).join('') + funcs_html_1.makeEndTag('tr');\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderTableCell = function (cell) {\n    var converter = new OpToHtmlConverter_1.OpToHtmlConverter(cell.item.op, this.converterOptions);\n    var parts = converter.getHtmlParts();\n\n    var cellElementsHtml = this._renderInlines(cell.item.ops, false);\n\n    return funcs_html_1.makeStartTag('td', {\n      key: 'data-row',\n      value: cell.item.op.attributes.table\n    }) + parts.openingTag + cellElementsHtml + parts.closingTag + funcs_html_1.makeEndTag('td');\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderBlock = function (bop, ops) {\n    var _this = this;\n\n    var converter = new OpToHtmlConverter_1.OpToHtmlConverter(bop, this.converterOptions);\n    var htmlParts = converter.getHtmlParts();\n\n    if (bop.isCodeBlock()) {\n      return htmlParts.openingTag + funcs_html_1.encodeHtml(ops.map(function (iop) {\n        return iop.isCustom() ? _this._renderCustom(iop, bop) : iop.insert.value;\n      }).join('')) + htmlParts.closingTag;\n    }\n\n    var inlines = ops.map(function (op) {\n      return _this._renderInline(op, bop);\n    }).join('');\n    return htmlParts.openingTag + (inlines || BrTag) + htmlParts.closingTag;\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderInlines = function (ops, isInlineGroup) {\n    var _this = this;\n\n    if (isInlineGroup === void 0) {\n      isInlineGroup = true;\n    }\n\n    var opsLen = ops.length - 1;\n    var html = ops.map(function (op, i) {\n      if (i > 0 && i === opsLen && op.isJustNewline()) {\n        return '';\n      }\n\n      return _this._renderInline(op, null);\n    }).join('');\n\n    if (!isInlineGroup) {\n      return html;\n    }\n\n    var startParaTag = funcs_html_1.makeStartTag(this.options.paragraphTag);\n    var endParaTag = funcs_html_1.makeEndTag(this.options.paragraphTag);\n\n    if (html === BrTag || this.options.multiLineParagraph) {\n      return startParaTag + html + endParaTag;\n    }\n\n    return startParaTag + html.split(BrTag).map(function (v) {\n      return v === '' ? BrTag : v;\n    }).join(endParaTag + startParaTag) + endParaTag;\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderInline = function (op, contextOp) {\n    if (op.isCustom()) {\n      return this._renderCustom(op, contextOp);\n    }\n\n    var converter = new OpToHtmlConverter_1.OpToHtmlConverter(op, this.converterOptions);\n    return converter.getHtml().replace(/\\n/g, BrTag);\n  };\n\n  QuillDeltaToHtmlConverter.prototype._renderCustom = function (op, contextOp) {\n    var renderCb = this.callbacks['renderCustomOp_cb'];\n\n    if (typeof renderCb === 'function') {\n      return renderCb.apply(null, [op, contextOp]);\n    }\n\n    return '';\n  };\n\n  QuillDeltaToHtmlConverter.prototype.beforeRender = function (cb) {\n    if (typeof cb === 'function') {\n      this.callbacks['beforeRender_cb'] = cb;\n    }\n  };\n\n  QuillDeltaToHtmlConverter.prototype.afterRender = function (cb) {\n    if (typeof cb === 'function') {\n      this.callbacks['afterRender_cb'] = cb;\n    }\n  };\n\n  QuillDeltaToHtmlConverter.prototype.renderCustomWith = function (cb) {\n    this.callbacks['renderCustomOp_cb'] = cb;\n  };\n\n  return QuillDeltaToHtmlConverter;\n}();\n\nexports.QuillDeltaToHtmlConverter = QuillDeltaToHtmlConverter;","map":{"version":3,"sources":["/Users/mikecrews/Documents/TechAcademy/GitHub/React.js/blog-project/node_modules/quill-delta-to-html/dist/commonjs/QuillDeltaToHtmlConverter.js"],"names":["Object","defineProperty","exports","value","InsertOpsConverter_1","require","OpToHtmlConverter_1","Grouper_1","group_types_1","ListNester_1","funcs_html_1","obj","value_types_1","TableGrouper_1","BrTag","QuillDeltaToHtmlConverter","deltaOps","options","rawDeltaOps","callbacks","assign","paragraphTag","encodeHtml","classPrefix","inlineStyles","multiLineBlockquote","multiLineHeader","multiLineCodeblock","multiLineParagraph","allowBackgroundClasses","linkTarget","orderedListTag","bulletListTag","listItemTag","undefined","converterOptions","linkRel","prototype","_getListTag","op","isOrderedList","isBulletList","isCheckedList","isUncheckedList","getGroupedOps","InsertOpsConverter","convert","pairedOps","Grouper","pairOpsWithTheirBlock","groupedSameStyleBlocks","groupConsecutiveSameStyleBlocks","blockquotes","header","codeBlocks","groupedOps","reduceConsecutiveSameStyleBlocksToOne","tableGrouper","TableGrouper","group","listNester","ListNester","nest","_this","groups","map","ListGroup","_renderWithCallbacks","GroupType","List","_renderList","TableGroup","Table","_renderTable","BlockGroup","g","Block","_renderBlock","ops","BlotBlock","_renderCustom","VideoItem","Video","converter","OpToHtmlConverter","getHtml","InlineGroup","_renderInlines","join","groupType","myRenderFn","html","beforeCb","apply","afterCb","list","firstItem","items","makeStartTag","item","li","_renderListItem","makeEndTag","attributes","indent","parts","getHtmlParts","liElementsHtml","openingTag","innerList","closingTag","table","rows","row","_renderTableRow","cells","cell","_renderTableCell","cellElementsHtml","key","bop","htmlParts","isCodeBlock","iop","isCustom","insert","inlines","_renderInline","isInlineGroup","opsLen","length","i","isJustNewline","startParaTag","endParaTag","split","v","contextOp","replace","renderCb","beforeRender","cb","afterRender","renderCustomWith"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar InsertOpsConverter_1 = require(\"./InsertOpsConverter\");\nvar OpToHtmlConverter_1 = require(\"./OpToHtmlConverter\");\nvar Grouper_1 = require(\"./grouper/Grouper\");\nvar group_types_1 = require(\"./grouper/group-types\");\nvar ListNester_1 = require(\"./grouper/ListNester\");\nvar funcs_html_1 = require(\"./funcs-html\");\nvar obj = require(\"./helpers/object\");\nvar value_types_1 = require(\"./value-types\");\nvar TableGrouper_1 = require(\"./grouper/TableGrouper\");\nvar BrTag = '<br/>';\nvar QuillDeltaToHtmlConverter = (function () {\n    function QuillDeltaToHtmlConverter(deltaOps, options) {\n        this.rawDeltaOps = [];\n        this.callbacks = {};\n        this.options = obj.assign({\n            paragraphTag: 'p',\n            encodeHtml: true,\n            classPrefix: 'ql',\n            inlineStyles: false,\n            multiLineBlockquote: true,\n            multiLineHeader: true,\n            multiLineCodeblock: true,\n            multiLineParagraph: true,\n            allowBackgroundClasses: false,\n            linkTarget: '_blank'\n        }, options, {\n            orderedListTag: 'ol',\n            bulletListTag: 'ul',\n            listItemTag: 'li'\n        });\n        var inlineStyles;\n        if (!this.options.inlineStyles) {\n            inlineStyles = undefined;\n        }\n        else if (typeof this.options.inlineStyles === 'object') {\n            inlineStyles = this.options.inlineStyles;\n        }\n        else {\n            inlineStyles = {};\n        }\n        this.converterOptions = {\n            encodeHtml: this.options.encodeHtml,\n            classPrefix: this.options.classPrefix,\n            inlineStyles: inlineStyles,\n            listItemTag: this.options.listItemTag,\n            paragraphTag: this.options.paragraphTag,\n            linkRel: this.options.linkRel,\n            linkTarget: this.options.linkTarget,\n            allowBackgroundClasses: this.options.allowBackgroundClasses\n        };\n        this.rawDeltaOps = deltaOps;\n    }\n    QuillDeltaToHtmlConverter.prototype._getListTag = function (op) {\n        return op.isOrderedList()\n            ? this.options.orderedListTag + ''\n            : op.isBulletList()\n                ? this.options.bulletListTag + ''\n                : op.isCheckedList()\n                    ? this.options.bulletListTag + ''\n                    : op.isUncheckedList()\n                        ? this.options.bulletListTag + ''\n                        : '';\n    };\n    QuillDeltaToHtmlConverter.prototype.getGroupedOps = function () {\n        var deltaOps = InsertOpsConverter_1.InsertOpsConverter.convert(this.rawDeltaOps, this.options);\n        var pairedOps = Grouper_1.Grouper.pairOpsWithTheirBlock(deltaOps);\n        var groupedSameStyleBlocks = Grouper_1.Grouper.groupConsecutiveSameStyleBlocks(pairedOps, {\n            blockquotes: !!this.options.multiLineBlockquote,\n            header: !!this.options.multiLineHeader,\n            codeBlocks: !!this.options.multiLineCodeblock\n        });\n        var groupedOps = Grouper_1.Grouper.reduceConsecutiveSameStyleBlocksToOne(groupedSameStyleBlocks);\n        var tableGrouper = new TableGrouper_1.TableGrouper();\n        groupedOps = tableGrouper.group(groupedOps);\n        var listNester = new ListNester_1.ListNester();\n        return listNester.nest(groupedOps);\n    };\n    QuillDeltaToHtmlConverter.prototype.convert = function () {\n        var _this = this;\n        var groups = this.getGroupedOps();\n        return groups\n            .map(function (group) {\n            if (group instanceof group_types_1.ListGroup) {\n                return _this._renderWithCallbacks(value_types_1.GroupType.List, group, function () {\n                    return _this._renderList(group);\n                });\n            }\n            else if (group instanceof group_types_1.TableGroup) {\n                return _this._renderWithCallbacks(value_types_1.GroupType.Table, group, function () {\n                    return _this._renderTable(group);\n                });\n            }\n            else if (group instanceof group_types_1.BlockGroup) {\n                var g = group;\n                return _this._renderWithCallbacks(value_types_1.GroupType.Block, group, function () {\n                    return _this._renderBlock(g.op, g.ops);\n                });\n            }\n            else if (group instanceof group_types_1.BlotBlock) {\n                return _this._renderCustom(group.op, null);\n            }\n            else if (group instanceof group_types_1.VideoItem) {\n                return _this._renderWithCallbacks(value_types_1.GroupType.Video, group, function () {\n                    var g = group;\n                    var converter = new OpToHtmlConverter_1.OpToHtmlConverter(g.op, _this.converterOptions);\n                    return converter.getHtml();\n                });\n            }\n            else {\n                return _this._renderWithCallbacks(value_types_1.GroupType.InlineGroup, group, function () {\n                    return _this._renderInlines(group.ops, true);\n                });\n            }\n        })\n            .join('');\n    };\n    QuillDeltaToHtmlConverter.prototype._renderWithCallbacks = function (groupType, group, myRenderFn) {\n        var html = '';\n        var beforeCb = this.callbacks['beforeRender_cb'];\n        html =\n            typeof beforeCb === 'function'\n                ? beforeCb.apply(null, [groupType, group])\n                : '';\n        if (!html) {\n            html = myRenderFn();\n        }\n        var afterCb = this.callbacks['afterRender_cb'];\n        html =\n            typeof afterCb === 'function'\n                ? afterCb.apply(null, [groupType, html])\n                : html;\n        return html;\n    };\n    QuillDeltaToHtmlConverter.prototype._renderList = function (list) {\n        var _this = this;\n        var firstItem = list.items[0];\n        return (funcs_html_1.makeStartTag(this._getListTag(firstItem.item.op)) +\n            list.items.map(function (li) { return _this._renderListItem(li); }).join('') +\n            funcs_html_1.makeEndTag(this._getListTag(firstItem.item.op)));\n    };\n    QuillDeltaToHtmlConverter.prototype._renderListItem = function (li) {\n        li.item.op.attributes.indent = 0;\n        var converter = new OpToHtmlConverter_1.OpToHtmlConverter(li.item.op, this.converterOptions);\n        var parts = converter.getHtmlParts();\n        var liElementsHtml = this._renderInlines(li.item.ops, false);\n        return (parts.openingTag +\n            liElementsHtml +\n            (li.innerList ? this._renderList(li.innerList) : '') +\n            parts.closingTag);\n    };\n    QuillDeltaToHtmlConverter.prototype._renderTable = function (table) {\n        var _this = this;\n        return (funcs_html_1.makeStartTag('table') +\n            funcs_html_1.makeStartTag('tbody') +\n            table.rows.map(function (row) { return _this._renderTableRow(row); }).join('') +\n            funcs_html_1.makeEndTag('tbody') +\n            funcs_html_1.makeEndTag('table'));\n    };\n    QuillDeltaToHtmlConverter.prototype._renderTableRow = function (row) {\n        var _this = this;\n        return (funcs_html_1.makeStartTag('tr') +\n            row.cells.map(function (cell) { return _this._renderTableCell(cell); }).join('') +\n            funcs_html_1.makeEndTag('tr'));\n    };\n    QuillDeltaToHtmlConverter.prototype._renderTableCell = function (cell) {\n        var converter = new OpToHtmlConverter_1.OpToHtmlConverter(cell.item.op, this.converterOptions);\n        var parts = converter.getHtmlParts();\n        var cellElementsHtml = this._renderInlines(cell.item.ops, false);\n        return (funcs_html_1.makeStartTag('td', {\n            key: 'data-row',\n            value: cell.item.op.attributes.table\n        }) +\n            parts.openingTag +\n            cellElementsHtml +\n            parts.closingTag +\n            funcs_html_1.makeEndTag('td'));\n    };\n    QuillDeltaToHtmlConverter.prototype._renderBlock = function (bop, ops) {\n        var _this = this;\n        var converter = new OpToHtmlConverter_1.OpToHtmlConverter(bop, this.converterOptions);\n        var htmlParts = converter.getHtmlParts();\n        if (bop.isCodeBlock()) {\n            return (htmlParts.openingTag +\n                funcs_html_1.encodeHtml(ops\n                    .map(function (iop) {\n                    return iop.isCustom() ? _this._renderCustom(iop, bop) : iop.insert.value;\n                })\n                    .join('')) +\n                htmlParts.closingTag);\n        }\n        var inlines = ops.map(function (op) { return _this._renderInline(op, bop); }).join('');\n        return htmlParts.openingTag + (inlines || BrTag) + htmlParts.closingTag;\n    };\n    QuillDeltaToHtmlConverter.prototype._renderInlines = function (ops, isInlineGroup) {\n        var _this = this;\n        if (isInlineGroup === void 0) { isInlineGroup = true; }\n        var opsLen = ops.length - 1;\n        var html = ops\n            .map(function (op, i) {\n            if (i > 0 && i === opsLen && op.isJustNewline()) {\n                return '';\n            }\n            return _this._renderInline(op, null);\n        })\n            .join('');\n        if (!isInlineGroup) {\n            return html;\n        }\n        var startParaTag = funcs_html_1.makeStartTag(this.options.paragraphTag);\n        var endParaTag = funcs_html_1.makeEndTag(this.options.paragraphTag);\n        if (html === BrTag || this.options.multiLineParagraph) {\n            return startParaTag + html + endParaTag;\n        }\n        return (startParaTag +\n            html\n                .split(BrTag)\n                .map(function (v) {\n                return v === '' ? BrTag : v;\n            })\n                .join(endParaTag + startParaTag) +\n            endParaTag);\n    };\n    QuillDeltaToHtmlConverter.prototype._renderInline = function (op, contextOp) {\n        if (op.isCustom()) {\n            return this._renderCustom(op, contextOp);\n        }\n        var converter = new OpToHtmlConverter_1.OpToHtmlConverter(op, this.converterOptions);\n        return converter.getHtml().replace(/\\n/g, BrTag);\n    };\n    QuillDeltaToHtmlConverter.prototype._renderCustom = function (op, contextOp) {\n        var renderCb = this.callbacks['renderCustomOp_cb'];\n        if (typeof renderCb === 'function') {\n            return renderCb.apply(null, [op, contextOp]);\n        }\n        return '';\n    };\n    QuillDeltaToHtmlConverter.prototype.beforeRender = function (cb) {\n        if (typeof cb === 'function') {\n            this.callbacks['beforeRender_cb'] = cb;\n        }\n    };\n    QuillDeltaToHtmlConverter.prototype.afterRender = function (cb) {\n        if (typeof cb === 'function') {\n            this.callbacks['afterRender_cb'] = cb;\n        }\n    };\n    QuillDeltaToHtmlConverter.prototype.renderCustomWith = function (cb) {\n        this.callbacks['renderCustomOp_cb'] = cb;\n    };\n    return QuillDeltaToHtmlConverter;\n}());\nexports.QuillDeltaToHtmlConverter = QuillDeltaToHtmlConverter;\n"]},"metadata":{},"sourceType":"script"}